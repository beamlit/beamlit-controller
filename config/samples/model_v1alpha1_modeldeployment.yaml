apiVersion: model.beamlit.io/v1alpha1
kind: ModelDeployment
metadata:
  namespace: beamlit
  labels:
    app.kubernetes.io/name: operator
    app.kubernetes.io/managed-by: kustomize
  name: modeldeployment-sample
spec:
  model: "test"
  environment: "production"
  modelSourceRef:
    apiVersion: apps/v1 # mandatory
    kind: Deployment # mandatory
    name: php-apache # mandatory
    namespace: beamlit # remove
  offloadingConfig:
    disabled: false
    behavior:
      percentage: 50
    serviceRef:
      name: php-apache
      namespace: beamlit
      targetPort: 80
    metrics:
      - type: Resource
        resource:
          name: cpu
          target:
            type: Utilization
            averageUtilization: 5
